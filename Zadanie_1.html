<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/style1.css">
    <script src="js/jquery-3.4.1.js" type="text/javascript"></script>
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Задание №1</title>
    <script>

        jQuery(function ($) {

                //change these if need to change qty or message:
                var characters = 255;
                var message = "Осталось <strong>{characters}</strong> символов.";

                $("#counter").append(message.replace("{characters}", characters));
                $("#text").keyup(function () {
                    if ($(this).val().length > characters) {
                        $(this).val($(this).val().substr(0, characters));
                    }
                    var remaining = characters - $(this).val().length;
                    $("#counter").html(message.replace("{characters}", remaining));
                    if (remaining <= 20) {
                        $("#counter").css("color", "red");
                    } else {
                        $("#counter").css("color", "black");
                    }
                    return($("#text").val());
                });

            var $choice = $('input[name=choice]');
            var choice = $choice.val();

            var $text = $('#text');
            var $res = $('#res');
            var str;

            $text.on('input', function () {
                str = $text.val();
                $res.text(textChange(choice, str));
            });

            $choice.change(function () {
                choice = $choice.filter(':checked').val();
                str = $text.val();
                $res.text(textChange(choice, str));
            });

            var textChange = function (choice, str) {
                var result;
                switch (choice) {
                    case '1':
                        result = str[0].toUpperCase() + str.substring(1).toLocaleLowerCase();
                        break;
                    case '2':
                        result = str.toLocaleLowerCase();
                        break;
                    case '3':
                        result = str.toLocaleUpperCase();
                        break;
                    case '4':
                        result = '';
                        var f = true;
                        for (let i = 0; i < str.length; i++) {
                            var ch = str[i];
                            if ((ch == ' ') || (ch == '\t') || (ch == '\n')) {
                                f = true;
                                result += ch;
                            } else {
                                if (f) {
                                    result += ch.toLocaleUpperCase();
                                } else {
                                    result += ch.toLocaleLowerCase();
                                }
                                f = false;
                            }
                        }
                        break;
                    case '5':
                        result = '';
                        var fo = true;
                        for (let i = 0; i < str.length; i++) {
                            var ch = str[i];
                            if ((ch == ' ') || (ch == '\t') || (ch == '\n')) {
                                fo = true;
                                result += ch;
                            } else {
                                if (fo) {
                                    result += ch.toLocaleLowerCase();
                                } else {
                                    result += ch.toLocaleUpperCase();
                                }
                                fo = false;
                            }
                        }
                        break;
                    default:
                        result = str;
                }
                return result;
            }


        });

        /*




        function checkItem(e) {

            switch (e) {
                case 'a1' : {

                    var str;
                    var res;
                    //var $text = $("#text");
                    $("#text").on('input keyup paste', function(){
                        //alert('0000');
                        str = $text.val();
                        res = str.toUpperCase();
                        $("#rezult").html(res);
                    });

                    break;
                }
                case 'a2' : {
                    alert(e);
                    break;
                }
                case 'a3' : {
                    alert(e);
                    break;
                }
                case 'a4' : {
                    alert(e);
                    break;
                }
                case 'a5' : {
                    alert(e);
                }

            }
        }*/
    </script>
</head>
<body>

<div id="main-wrapper" class="main-wrapper">
    <form>
        <h1>Выберете действие:</h1>

        <div>
            <!--<input type="button" value="Select and Click" onclick="checkItem(this.value);"><br>-->
            <input type="radio" id="choice1" name="choice" value="1" checked>
            <label for="choice1">Строка начинающаяся с заглавной буквы</label><br>

            <input type="radio" id="choice2" name="choice" value="2">
            <label for="choice2">Строка в нижнем регистре</label><br>

            <input type="radio" id="choice3" name="choice" value="3">
            <label for="choice3">Строка в верхнем регистре</label><br>

            <input type="radio" id="choice4" name="choice" value="4">
            <label for="choice4">Первый символ каждого слова в верхнем регистре</label><br>

            <input type="radio" id="choice5" name="choice" value="5">
            <label for="choice5">Первый символ каждого слова в нижнем регистре</label><br>
        </div><br/>

        <textarea id="text" rows="10" cols="60"></textarea>
        <br/>
        <div id="counter"></div>
        <br/>

        <div>
            <h2>Результат:</h2>
            <pre id="res"></pre>
        </div>

        <!-- <p id="countClass" class="text">
                 <textarea rows="10" cols="45" name="text" onkeyup="countChar(this)"></textarea>
         <div id="charNum">55</div>
         </p>-->
        <!--<div class="dws">
            <a href="#" class="butt" onclick="following();">Преобразовать</a>
        </div>-->
    </form>
</div>


</body>
</html>